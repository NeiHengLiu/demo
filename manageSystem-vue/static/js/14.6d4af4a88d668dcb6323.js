webpackJsonp([14],{"4Mdi":function(e,o){},Ih9A:function(e,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=s("4YfN"),t=s.n(a),l=s("lC5x"),r=s.n(l),d=s("J0Oq"),c=s.n(d),i=s("bBUo"),n=s("1h8J"),p={data:function(){return{selectGoodsForm:{selectSpeciesList:[{label:"糍粑",value:"01"},{label:"小糍粑",value:"02"},{label:"大糍粑",value:"03"}],selectSpecies:"",speciesName:"",speciesInfo:""},addGoodsForm:{foodName:"",foodActivity:"",foodInfo:"",charFood:[],charFoodList:[{label:"香甜",value:"01"},{label:"可口",value:"02"},{label:"美味",value:"03"},{label:"入口即化",value:"04"},{label:"冰镇",value:"05"},{label:"暖和",value:"06"}],specData:[{specName:"默认",packExpense:0,price:0}]},addSpecForm:{specName:"",packExpense:0,price:0},rules:{foodName:[{required:!0,message:"请输入食品名称",trigger:"blur"}],specName:[{required:!0,message:"请输入规格",trigger:"blur"}]},showEdit:!1,addScopeVisible:!1,foodSpecs:"one",loading:!1,loading2:!1}},methods:{showEditLine:function(){this.showEdit=!this.showEdit},handleAvatarSuccess:function(e,o){},beforeAvatarUpload:function(e){},submitFoodSpecies:function(){var e=this;return c()(r.a.mark(function o(){var s,a;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(s=e.selectGoodsForm.speciesName.replace(/(^\s*)|(\s*$)/g,""),a=e.selectGoodsForm.speciesInfo.replace(/(^\s*)|(\s*$)/g,""),""===s){o.next=10;break}return e.loading2=!e.loading2,o.next=6,Object(n.a)({speciesName:s,speciesInfo:a});case 6:!0===o.sent.state&&(e.$message({type:"success",message:"添加成功"}),e.showEdit=!e.showEdit,e.selectGoodsForm.speciesName="",e.selectGoodsForm.speciesInfo="",e.loading2=!e.loading2),o.next=11;break;case 10:e.$notify({type:"error",title:"错误",message:"必须填写食品种类！"});case 11:case"end":return o.stop()}},o,e)}))()},deleteScope:function(e){var o=this.addGoodsForm.specData;o.length>1?o.splice(e.$index,1):this.$notify({type:"error",title:"错误",message:"必须保留一个规格！"})},addSpec:function(e){var o=this;this.$refs[e].validate(function(s){s&&(o.addGoodsForm.specData.push(t()({},o.addSpecForm)),o.emptySpec(e))})},emptySpec:function(e){this.addSpecForm.packExpense=0,this.addSpecForm.price=0,this.$refs[e].resetFields(),this.addScopeVisible=!1},submitAddGoodsForm:function(e){var o=this;return c()(r.a.mark(function s(){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:o.$refs[e].validate(function(){var e=c()(r.a.mark(function e(s){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=8;break}return o.loading=!o.loading,e.next=4,Object(n.b)(t()({},o.addGoodsForm,o.selectGoodsForm));case 4:e.sent.state&&(o.$message({type:"success",message:"商品添加成功！"}),o.addGoodsForm.foodName="",o.addGoodsForm.foodActivity="",o.addGoodsForm.foodInfo="",o.addGoodsForm.charFood=[],o.addGoodsForm.specData=[{specName:"默认",packExpense:0,price:0}],o.loading=!o.loading),e.next=9;break;case 8:o.$message({type:"error",message:"表单中有必填项未通过验证！"});case 9:case"end":return e.stop()}},e,o)}));return function(o){return e.apply(this,arguments)}}());case 1:case"end":return s.stop()}},s,o)}))()}},components:{headTop:i.a}},m={render:function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",{staticClass:"add_goods"},[s("head-top"),e._v(" "),s("div",{staticClass:"baseList_table_conter"},[s("header",{staticClass:"form_header"},[e._v("选择食品种类")]),e._v(" "),s("el-form",{ref:"selectGoodsForm",staticClass:"add_goods_form",attrs:{model:e.selectGoodsForm,"label-width":"100px"}},[s("el-row",{staticClass:"species_select"},[s("el-form-item",{attrs:{label:"食品种类"}},[s("el-select",{staticStyle:{width:"100%"},model:{value:e.selectGoodsForm.selectSpecies,callback:function(o){e.$set(e.selectGoodsForm,"selectSpecies",o)},expression:"selectGoodsForm.selectSpecies"}},e._l(e.selectGoodsForm.selectSpeciesList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("el-row",{staticClass:"add_select_show",class:e.showEdit?"active":""},[s("div",{staticClass:"add_select"},[s("el-form-item",{attrs:{label:"食品种类"}},[s("el-input",{model:{value:e.selectGoodsForm.speciesName,callback:function(o){e.$set(e.selectGoodsForm,"speciesName",o)},expression:"selectGoodsForm.speciesName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"各类描述"}},[s("el-input",{model:{value:e.selectGoodsForm.speciesInfo,callback:function(o){e.$set(e.selectGoodsForm,"speciesInfo",o)},expression:"selectGoodsForm.speciesInfo"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:e.loading2},on:{click:e.submitFoodSpecies}},[e._v("提交")])],1)],1)]),e._v(" "),s("div",{staticClass:"show_edit_btn",on:{click:e.showEditLine}},[e.showEdit?s("i",{staticClass:"el-icon-arrow-up"}):s("i",{staticClass:"el-icon-arrow-down"}),e._v(" "),s("span",[e._v("添加食品种类")])])],1),e._v(" "),s("header",{staticClass:"form_header mrt_40"},[e._v("添加食品")]),e._v(" "),s("el-form",{ref:"addGoodsForm",staticClass:"add_goods_form add_goods_line",attrs:{model:e.addGoodsForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"食品名称",prop:"foodName"}},[s("el-input",{model:{value:e.addGoodsForm.foodName,callback:function(o){e.$set(e.addGoodsForm,"foodName",o)},expression:"addGoodsForm.foodName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"食品活动"}},[s("el-input",{model:{value:e.addGoodsForm.foodActivity,callback:function(o){e.$set(e.addGoodsForm,"foodActivity",o)},expression:"addGoodsForm.foodActivity"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"食品详情"}},[s("el-input",{model:{value:e.addGoodsForm.foodInfo,callback:function(o){e.$set(e.addGoodsForm,"foodInfo",o)},expression:"addGoodsForm.foodInfo"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上传食品图片"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),s("el-form-item",{attrs:{label:"食品特点"}},[s("el-select",{attrs:{multiple:!0,"multiple-limit":4},model:{value:e.addGoodsForm.charFood,callback:function(o){e.$set(e.addGoodsForm,"charFood",o)},expression:"addGoodsForm.charFood"}},e._l(e.addGoodsForm.charFoodList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"食品规格"}},[s("el-radio",{attrs:{label:"one"},model:{value:e.foodSpecs,callback:function(o){e.foodSpecs=o},expression:"foodSpecs"}},[e._v("单规格")]),e._v(" "),s("el-radio",{attrs:{label:"more"},model:{value:e.foodSpecs,callback:function(o){e.foodSpecs=o},expression:"foodSpecs"}},[e._v("多规格")])],1),e._v(" "),"one"===e.foodSpecs?[s("el-form-item",{attrs:{label:"包装费"}},[s("el-input-number",{attrs:{min:0},model:{value:e.addGoodsForm.specData[0].packExpense,callback:function(o){e.$set(e.addGoodsForm.specData[0],"packExpense",o)},expression:"addGoodsForm.specData[0].packExpense"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"价格"}},[s("el-input-number",{attrs:{min:0},model:{value:e.addGoodsForm.specData[0].price,callback:function(o){e.$set(e.addGoodsForm.specData[0],"price",o)},expression:"addGoodsForm.specData[0].price"}})],1)]:[s("el-row",{staticClass:"txt_center mrb_20"},[s("el-button",{attrs:{type:"primary"},on:{click:function(o){e.addScopeVisible=!0}}},[e._v("添加规格")])],1),e._v(" "),s("el-row",{staticClass:"baseList_table_border mrb_20"},[s("el-table",{attrs:{data:e.addGoodsForm.specData,"header-row-class-name":"baseList_table_head"}},[s("el-table-column",{attrs:{label:"规格",prop:"specName"}}),e._v(" "),s("el-table-column",{attrs:{label:"包装费",prop:"packExpense"}}),e._v(" "),s("el-table-column",{attrs:{label:"价格",prop:"price"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){e.deleteScope(o)}}},[e._v("删除")])]}}])})],1)],1)],e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(o){e.submitAddGoodsForm("addGoodsForm")}}},[e._v("确认添加食品")])],1)],2),e._v(" "),s("el-dialog",{attrs:{title:"添加规格","show-close":!1,visible:e.addScopeVisible},on:{"update:visible":function(o){e.addScopeVisible=o}}},[s("el-form",{ref:"addSpecForm",attrs:{model:e.addSpecForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"规格",prop:"specName"}},[s("el-input",{model:{value:e.addSpecForm.specName,callback:function(o){e.$set(e.addSpecForm,"specName",o)},expression:"addSpecForm.specName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"包装费"}},[s("el-input-number",{attrs:{min:0},model:{value:e.addSpecForm.packExpense,callback:function(o){e.$set(e.addSpecForm,"packExpense",o)},expression:"addSpecForm.packExpense"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"价格"}},[s("el-input-number",{attrs:{min:0},model:{value:e.addSpecForm.price,callback:function(o){e.$set(e.addSpecForm,"price",o)},expression:"addSpecForm.price"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(o){e.emptySpec("addSpecForm")}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(o){e.addSpec("addSpecForm")}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var u=s("Z0/y")(p,m,!1,function(e){s("4Mdi")},null,null);o.default=u.exports}});