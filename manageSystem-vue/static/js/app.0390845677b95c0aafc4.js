webpackJsonp([17],{"1h8J":function(n,e,t){"use strict";var r=t("rVsN"),o=t.n(r),u=t("aozt"),a="";a="https://www.easy-mock.com/mock/5aa8d3d82e74616d75917b9b/manageSystem-vue";var i=t.n(u).a.create({baseURL:a,timeout:3e4});i.interceptors.request.use(function(n){return n},function(n){return o.a.reject(n)}),i.interceptors.response.use(function(n){return n},function(n){return o.a.reject(n)});var c=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new o.a(function(r,o){"GET"===t?i.get(n,{params:e}).then(function(n){r(n.data)}).catch(function(n){o(n)}):"POST"===t&&i.post(n,e).then(function(n){r(n.data)}).catch(function(n){o(n)})})};t.d(e,"i",function(){return s}),t.d(e,"j",function(){return d}),t.d(e,"m",function(){return l}),t.d(e,"p",function(){return f}),t.d(e,"g",function(){return m}),t.d(e,"f",function(){return p}),t.d(e,"e",function(){return h}),t.d(e,"n",function(){return g}),t.d(e,"k",function(){return T}),t.d(e,"d",function(){return E}),t.d(e,"c",function(){return b}),t.d(e,"b",function(){return S}),t.d(e,"a",function(){return v}),t.d(e,"o",function(){return _}),t.d(e,"l",function(){return O}),t.d(e,"h",function(){return M});var s=function(n){return c("/login/login",n,"POST")},d=function(){return c("/login/logout")},l=function(){return c("/home/statistical")},f=function(n){return c("/dataManage/userList",n)},m=function(){return c("/dataManage/foodList")},p=function(n){return c("/dataManage/foodDelete",n)},h=function(){return c("/dataManage/foodClassify")},g=function(){return c("/dataManage/upFood")},T=function(n){return c("/dataManage/orderList",n)},E=function(){return c("/dataManage/adminList")},b=function(n){return c("/addData/addShops",n,"POST")},S=function(n){return c("/addData/addGoods",n,"POST")},v=function(n){return c("/addData/addGoods/addFoodTypes",n,"POST")},_=function(){return c("/chart/userDistribution")},O=function(n){return c("/editor/richTextEditor",n,"POST")},M=function(n){return c("/login/getUserInfo",n)}},D9hl:function(n,e){},FVuk:function(n,e){},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("MVMM"),o=t("jPwE"),u=t.n(o),a=(t("FVuk"),t("aiqZ")),i=t.n(a),c=(t("lMgl"),t("D9hl"),{render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"wah_100",attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var s=t("Z0/y")({name:"App"},c,!1,function(n){t("UXWJ")},null,null).exports,d=t("zO6J");r.default.use(d.a);var l=[{path:"/",component:function(n){return t.e(5).then(function(){return n(t("Luci"))}.bind(null,t)).catch(t.oe)}},{path:"/manage",component:function(n){return t.e(11).then(function(){return n(t("kR9e"))}.bind(null,t)).catch(t.oe)},children:[{path:"",component:function(n){return Promise.all([t.e(0),t.e(1)]).then(function(){return n(t("vkyI"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:[]}}]}],f=new d.a({routes:l}),m=[{path:"/userList",component:function(n){return Promise.all([t.e(0),t.e(13)]).then(function(){return n(t("4LN7"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["数据管理","用户列表"],icon:["el-icon-document"]}},{path:"/businessList",component:function(n){return Promise.all([t.e(0),t.e(7)]).then(function(){return n(t("vJdn"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["数据管理","商家列表"]}},{path:"/foodList",component:function(n){return Promise.all([t.e(0),t.e(6)]).then(function(){return n(t("umlS"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["数据管理","食品列表"]}},{path:"/orderList",component:function(n){return Promise.all([t.e(0),t.e(9)]).then(function(){return n(t("tTXb"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["数据管理","订单列表"]}},{path:"/adminList",component:function(n){return Promise.all([t.e(0),t.e(3)]).then(function(){return n(t("4EWk"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["数据管理","管理员列表"]}},{path:"/addShops",component:function(n){return Promise.all([t.e(0),t.e(12)]).then(function(){return n(t("I8rX"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["添加数据","添加商铺"],icon:["el-icon-plus"]}},{path:"/addGoods",component:function(n){return Promise.all([t.e(0),t.e(14)]).then(function(){return n(t("Ih9A"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["添加数据","添加商品"]}},{path:"/userDistribution",component:function(n){return Promise.all([t.e(0),t.e(2)]).then(function(){return n(t("OWhS"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["图表","用户分布"],icon:["el-icon-star-on"]}},{path:"/richTextEditor",component:function(n){return Promise.all([t.e(0),t.e(4)]).then(function(){return n(t("UVas"))}.bind(null,t)).catch(t.oe)},meta:{role:["admin"],crumbs:["编辑","文本编辑"],icon:["el-icon-edit"]}},{path:"/settingUp",component:function(n){return Promise.all([t.e(0),t.e(15)]).then(function(){return n(t("I1xQ"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["设置","管理员设置"],icon:["el-icon-setting"]}},{path:"/instructions",component:function(n){return Promise.all([t.e(0),t.e(8)]).then(function(){return n(t("xccv"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["说明","说明"],icon:["el-icon-warning"]}},{path:"/page_404",component:function(n){return Promise.all([t.e(0),t.e(10)]).then(function(){return n(t("c5Mg"))}.bind(null,t)).catch(t.oe)},meta:{role:["general","admin"],crumbs:["页面提示"]}}],p=t("9rMa"),h=t("lC5x"),g=t.n(h),T=t("rVsN"),E=t.n(T),b=t("J0Oq"),S=t.n(b),v=t("1h8J"),_=t("uAC3"),O=t.n(_),M=function(){return O.a.get("user-token")},P={state:{token:M(),roles:[],name:"",date:"",status:"",id:"",loginTime:""},mutations:{SET_TOKEN:function(n,e){n.token=e},SET_ROLES:function(n,e){n.roles=e},SET_NAME:function(n,e){n.name=e},SET_DATE:function(n,e){n.date=e},SET_STATUS:function(n,e){n.status=e},SET_ID:function(n,e){n.id=e},SET_LOGINTIME:function(n,e){n.loginTime=e}},actions:{loginByUser:function(n,e){var t=this,r=n.commit;return S()(g.a.mark(function n(){var o,u;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(v.i)({userName:e.userName,userPwd:e.userPwd});case 3:return o=n.sent,u=o.data,r("SET_TOKEN",u.token),t=u.token,O.a.set("user-token",t,{expires:1,path:"/"}),n.abrupt("return",E.a.resolve(o));case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",E.a.reject(new Error("请求出错!")));case 13:case"end":return n.stop()}var t},n,t,[[0,10]])}))()},getUserInfo:function(n){var e=this,t=n.commit,r=n.state;return S()(g.a.mark(function n(){var o,u;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(v.h)({token:r.token});case 3:return o=n.sent,u=o.data,t("SET_ROLES",u.roles),t("SET_NAME",u.name),t("SET_DATE",u.date),t("SET_STATUS",u.status),t("SET_ID",u.id),t("SET_LOGINTIME",u.loginTime),n.abrupt("return",E.a.resolve(o));case 14:return n.prev=14,n.t0=n.catch(0),n.abrupt("return",E.a.error(new Error("请求出错！")));case 17:case"end":return n.stop()}},n,e,[[0,14]])}))()},fedLogout:function(n){var e=this,t=n.commit;return S()(g.a.mark(function n(){var r;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(v.j)();case 3:return r=n.sent,t("SET_TOKEN",""),t("SET_ROLES",[]),t("SET_NAME",""),t("SET_DATE",""),t("SET_STATUS",""),t("SET_ID",""),t("SET_LOGINTIME",""),O.a.remove("user-token"),n.abrupt("return",E.a.resolve(r));case 15:return n.prev=15,n.t0=n.catch(0),n.abrupt("return",E.a.reject("请求出错！"));case 18:case"end":return n.stop()}},n,e,[[0,15]])}))()}}},w={state:{routers:l,addRouters:[]},mutations:{SET_ROUTERS:function(n,e){n.addRouters=e}},actions:{getRouters:function(n,e){var t=n.commit;return new E.a(function(n){var r;r=function(n,e){return n.filter(function(n){return!!function(n,e){return!n.meta||!n.meta.role||e.some(function(e){return n.meta.role.indexOf(e)>=0})}(n,e)})}(m,e),t("SET_ROUTERS",r),n()})}}},k={roles:function(n){return n.user.roles},addRouters:function(n){return n.permission.addRouters},name:function(n){return n.user.name},date:function(n){return n.user.date},status:function(n){return n.user.status},id:function(n){return n.user.id},loginTime:function(n){return n.user.loginTime}};r.default.use(p.a);var L=new p.a.Store({modules:{user:P,permission:w},getters:k}),R=t("4YfN"),I=t.n(R),N=t("IHPB"),x=t.n(N);f.beforeEach(function(n,e,t){var r,u;M()?"/"===n.path?(o.Message.success("您之前登录过，系统已自动登录！"),t("/manage")):0===L.getters.roles.length?L.dispatch("getUserInfo").then(function(e){var r=L.getters.roles;L.dispatch("getRouters",r).then(function(){var e;(e=f.options.routes[1].children).push.apply(e,x()(L.getters.addRouters)),f.addRoutes(f.options.routes),t(I()({},n,{replace:!0}))})}).catch(function(){L.dispatch("fedLogout").then(function(n){n.data&&(o.Message.error("拉取用户信息失败，请重新登录！"),t({path:"/"}))})}):(r=n.meta.role,u=L.getters.roles,void 0!==r&&u.some(function(n){return r.indexOf(n)>=0})?t():t({path:"/page_404",replace:!0})):"/"===n.path?t():(o.Message.error("登录已过期，请重新登录！"),t("/"))}),r.default.use(u.a),r.default.use(i.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:f,store:L,render:function(n){return n(s)}})},UXWJ:function(n,e){},lMgl:function(n,e){}},["NHnr"]);